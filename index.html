<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyurTrace - Blockchain Herb Traceability</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">üåø AyurTrace</div>
            <div class="nav-menu">
                <a href="index.html">Home</a>
                <a href="#about">About</a>
                <a href="#" id="dashboardLink">Dashboard</a>
                <a href="login.html" id="authLink" onclick="handleAuthClick(event)">Login</a>
            </div>
        </div>
    </nav>

    <main>
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Blockchain-Powered Ayurvedic Herb Traceability</h1>
                <p>Verify the authenticity and journey of your Ayurvedic herbs from farm to pharmacy</p>
                
                <div class="qr-scanner">
                    <h2>Scan QR Code</h2>
                    <div class="scanner-container">
                        <video id="qr-video" autoplay></video>
                        <div id="qr-result" class="hidden"></div>
                    </div>
                    <button id="start-scan" class="btn-primary">Start Scanning</button>
                    <input type="file" id="qr-file" accept="image/*" class="hidden">
                    <button id="upload-qr" class="btn-secondary">Upload QR Image</button>
                </div>

                <div class="features">
                    <div class="feature-card">
                        <h3>üîç Full Traceability</h3>
                        <p>Track herbs from seed to shelf</p>
                    </div>
                    <div class="feature-card">
                        <h3>üõ°Ô∏è Blockchain Security</h3>
                        <p>Immutable records you can trust</p>
                    </div>
                    <div class="feature-card">
                        <h3>üå± Sustainability</h3>
                        <p>Verify eco-friendly practices</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container">
                <h2>How It Works</h2>
                <div class="process-steps">
                    <a href="harvest.html" class="step-link">
                        <div class="step clickable-step">
                            <div class="step-number">1</div>
                            <h3>Harvest</h3>
                            <p>Farmers record harvest data on blockchain</p>
                            <div class="step-arrow">‚Üí</div>
                        </div>
                    </a>
                    <a href="process.html" class="step-link">
                        <div class="step clickable-step">
                            <div class="step-number">2</div>
                            <h3>Process</h3>
                            <p>Processing steps tracked and verified</p>
                            <div class="step-arrow">‚Üí</div>
                        </div>
                    </a>
                    <a href="test.html" class="step-link">
                        <div class="step clickable-step">
                            <div class="step-number">3</div>
                            <h3>Test</h3>
                            <p>Lab certificates uploaded to blockchain</p>
                            <div class="step-arrow">‚Üí</div>
                        </div>
                    </a>
                    <a href="verify.html" class="step-link">
                        <div class="step clickable-step">
                            <div class="step-number">4</div>
                            <h3>Verify</h3>
                            <p>Consumers scan QR for full provenance</p>
                        </div>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 AyurTrace. Securing Ayurvedic Heritage with Blockchain.</p>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script src="db-config.js"></script>
    <script src="qr-scanner.js"></script>
    <script src="app.js"></script>
<<<<<<< HEAD
    <script src="ai-assistant.js"></script>
=======
    <script src="blockchain-status.js"></script>
    <script src="page-transitions.js"></script>
    <script src="demo-animations.js"></script>
>>>>>>> 713115b7710eead0c05f2340a5f742f1bf587bae
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Always force page to load at top (Home section)
            window.scrollTo(0, 0);
            // Clear any hash from URL to prevent auto-scrolling
            if (window.location.hash) {
                history.replaceState(null, null, window.location.pathname);
            }
            
            updateNavigation();
        });
        
        function updateNavigation() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const userRole = localStorage.getItem('userRole');
            
            const authLink = document.getElementById('authLink');
            const dashboardLink = document.getElementById('dashboardLink');
            
            if (isLoggedIn) {
                // User is logged in - change to Logout
                authLink.textContent = 'Logout';
                authLink.href = '#';
                
                // Set dashboard link based on user role
                switch(userRole) {
                    case 'processor':
                        dashboardLink.href = 'processor-dashboard.html';
                        break;
                    case 'lab':
                        dashboardLink.href = 'lab-dashboard.html';
                        break;
                    case 'manufacturer':
                        dashboardLink.href = 'manufacturer-dashboard.html';
                        break;
                    case 'regulator':
                        dashboardLink.href = 'regulator-dashboard.html';
                        break;
                    default:
                        dashboardLink.href = 'login.html';
                }
            } else {
                // User is not logged in - show Login
                authLink.textContent = 'Login';
                authLink.href = 'login.html';
                dashboardLink.href = 'login.html';
            }
        }
        
        function handleAuthClick(event) {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                // User is logged in, perform logout
                event.preventDefault();
                logout();
            }
            // If not logged in, let the link navigate to login.html
        }
        
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userRole');
            localStorage.removeItem('username');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>